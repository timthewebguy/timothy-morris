function transformAnimation(t,i){var e=t.getBoundingClientRect(),a=(e.top+window.pageYOffset-window.innerHeight)/page.height*page.scrollRatio,n=(e.bottom+window.pageYOffset)/page.height*page.scrollRatio,o=n-a;i.start=a,i.end=n,i.duration=o}function generateAnimations(t,i){var e=t.dataset.panelTwin;e&&(t=$(e));var a=i;i.dataset.animationTarget&&(a=$(i.dataset.animationTarget));for(var n=i.dataset.animation?i.dataset.animation.split(/,+(?![^\{]*\})/g):"",o=0;o<n.length;o++){var s=n[o].replace("{","").replace("}",""),r=new Animation(t,i,a,0,1,1,s,i.dataset.animationEasing||"ease",i.dataset.animationRound||!1);transformAnimation(t,r),r.render(0,"init"),animations.push(r)}debug||(i.removeAttribute("data-animation"),i.removeAttribute("data-animation-easing"),i.removeAttribute("data-animation-round"),i.removeAttribute("data-animation-target"),i.className=i.className.replace("animated",""))}function initAnimations(){page.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight),debug&&console.log("Page Height:",page.height),page.scrollRatio=page.height/(page.height-window.innerHeight),debug&&console.log("Scroll Ratio:",page.scrollRatio),page.currentY=window.pageYOffset/page.height*page.scrollRatio,$$(".panel").forEach(function(t){$$(".animated",t).forEach(function(i){generateAnimations(t,i)})}),animations.forEach(function(t){t.render(page.currentY,"update")})}function updateAnimations(){page.currentY=window.pageYOffset/page.height*page.scrollRatio;for(var t=0;t<animations.length;t++)animations[t].render(page.currentY,"update");page.resizeClock=(page.resizeClock+1)%10,0==page.resizeCloc&&resizeAnimations()}function resizeAnimations(){page.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight),page.scrollRatio=page.height/(page.height-window.innerHeight),animations.forEach(function(t){transformAnimation(t.panel,t)})}function initCanvas(){titleCanvas=$("#titleCanvas"),resizeCanvas(),titleCtx=titleCanvas.getContext("2d");for(var t=0;titleParticleCount>t;t++)titleParticles.push(new Particle(.1,Math.random()-.5,Math.random()-.5,Math.random()*titleCanvas.width,Math.random()*titleCanvas.height))}function updateCanvas(){if(!titleCanvas.hasClass("a-after")){titleCtx.clearRect(0,0,titleCanvas.width,titleCanvas.height);for(var t=0;titleParticleCount>t;t++){titleParticles[t].render(titleCtx);for(var i=t+1;titleParticleCount>i;i++)(Math.abs(titleParticles[t].positionX-titleParticles[i].positionX)<160||Math.abs(titleParticles[t].positionY-titleParticles[i].positionY)<160)&&titleParticles[t].connect(titleParticles[i],titleCtx)}}}function resizeCanvas(){titleCanvas.width=2*window.innerWidth,titleCanvas.height=2*window.innerHeight}function $$(t,i){i=i||document;var e=i.querySelectorAll(t);return Array.prototype.slice.call(e)}function $(t,i){return i=i||document,i.querySelector(t)}function initScrollSnap(){resizeScrollSnap(),lDate=Date.now(),$$(".snap-point").forEach(function(t){snapPoints.push(new SnapPoint(t))})}function updateScrollSnap(){if(deltaTime=(Date.now()-lDate)/1e3,null==target)scrolling||snapPoints.forEach(function(t){Math.abs(t.snapTarget-window.pageYOffset)<t.snapMargin&&(target=t)});else if(1==animationState&&(scrolling?target=null:(setTimeout(function(){scrolling?(animationState=1,target=null):(animationState=3,targetDist=target.snapTarget-window.pageYOffset)},100),animationState=2)),3==animationState){animationProgress+=3*deltaTime;var t=animationProgress;t=Math.pow(t-1,3)+1,window.scrollTo(0,target.snapTarget-targetDist*(1-t)),animationProgress>=1&&(window.scrollTo(0,target.snapTarget),animationState=4)}lDate=Date.now()}function resizeScrollSnap(){snapPoints.forEach(function(t){var i=t.el.getBoundingClientRect();switch(t.el.dataset.snapTarget){case"top":t.snapTarget=window.pageYOffset+i.top;break;case"middle":t.snapTarget=window.pageYOffset+i.top+.5*window.innerHeight;break;case"bottom":t.snapTarget=window.pageYOffset+i.top+window.innerHeight}})}function scrollScrollSnap(){4==animationState&&(animationState=1,animationProgress=0,target=null),scrolling=!0,clearTimeout(scrollTimer),scrollTimer=setTimeout(function(){scrolling=!1},100)}var debug=!0,page={currentY:0,scrollRatio:0,height:0,resizeClock:0},animations=new Array;Array.prototype.clean=function(t){for(var i=0;i<this.length;i++)this[i]==t&&(this.splice(i,1),i--);return this};var Animation=function(t,i,e,a,n,o,s,r,l){if(this.panel=t,this.el=i,this.target=e,this.start=a,this.end=n,this.duration=o,""!=s){var h=s.replace(/ /g,"").replace(/\)/g,") ").replace(/ \//g,"/").replace(/\s+$/,"");this.animationAttribute=h.split("=").shift(),this.target.style.willChange=this.target.style.willChange+" "+this.animationAttribute,-1!==h.indexOf("(")?this.animationValueType="function":this.animationValueType="value";for(var m=h.split("=").pop().split(/,+(?![^\(]*\))/g),c="",g=0;g<m.length;g++){var u=m[g].split(":");if("value"==this.animationValueType)c+='{"time":"'+u[0]+'","value":"'+u[1]+'"}';else{for(var p="[",d=u[1].split(/ /g).clean(""),f=0;f<d.length;f++){p+='{"functionName":"',p+=d[f].match(/([a-zA-Z0-9])+/g)[0],p+='","values":[';for(var v=d[f].match(/\((.*?)\)/g)[0].replace(/[\(\)]/g,"").split(/,/g).clean(""),w=0;w<v.length;w++)p+='"'+v[w]+'"',w<v.length-1&&(p+=",");p+="]}",f<d.length-1&&(p+=",")}p+="]",c+='{"time":"'+u[0]+'","values":'+p+',"staticValue":"'+u[1]+'"}'}g<m.length-1&&(c+=",")}this.animation=JSON.parse('{"keyframes":['+c+"]}"),this.easing=r,this.round=l}this.animationStatus="during",debug&&console.log(this)};Animation.prototype.animationStart=function(){return this.start+this.animation.keyframes[0].time*this.duration},Animation.prototype.animationEnd=function(){return this.start+this.animation.keyframes[this.animation.keyframes.length-1].time*this.duration},Animation.prototype.getUnits=function(t){for(var i=["px","em","%","deg","turn","vw","vh","vmin","vmax"],e=0;e<i.length;e++)if(-1!==t.indexOf(i[e]))return i[e];return""},Animation.prototype.render=function(t,i){var e="during";if(t>this.start+this.animation.keyframes[this.animation.keyframes.length-1].time*this.duration?e="after":t<this.start+this.animation.keyframes[0].time*this.duration&&(e="before"),"init"==i&&""==this.target.style[this.animationAttribute]||"update"==i)if(this.animationStatus==e||"before"!=e&&"after"!=e){e!=this.animationStatus;for(var a=(t-this.start)/this.duration,n=this.animation.keyframes[0],o=this.animation.keyframes[this.animation.keyframes.length-1],s=0;s<this.animation.keyframes.length;s++){var r=this.animation.keyframes[s];if(r.time==a)return void("value"==this.animationValueType?this.el.style[this.animationAttribute]=r.value:this.el.style[this.animationAttribute]=r.staticValue);r.time<a?parseFloat(r.time)>parseFloat(n.time)&&(n=r):parseFloat(r.time)<parseFloat(o.time)&&(o=r)}var l,h=(a-n.time)/(o.time-n.time);switch(this.easing){case"easeIn":h=Math.pow(h,2);break;case"easeOut":h=-(Math.pow(h-1,2)-1);break;case"ease":h=(h/=.5)<1?.5*Math.pow(h,2):-.5*((h-=2)*h-2)}var l="";if("function"==this.animationValueType)for(var m=0;m<n.values.length;m++){var c=n.values[m],g=o.values[m];l+=c.functionName+"(";for(var u=0;u<c.values.length;u++){var p=parseFloat(c.values[u])*(1-h)+parseFloat(g.values[u])*h;this.round&&(p=Math.round(p)),l+=p+this.getUnits(c.values[u]),u<c.values.length-1&&(l+=",")}l+=")",m<n.values.length-1&&(l+=" ")}else l=parseFloat(n.value)*(1-h)+parseFloat(o.value)*h+this.getUnits(n.value);this.target.style[this.animationAttribute]=l}else"after"==e?"value"==this.animationValueType?this.target.style[this.animationAttribute]=this.animation.keyframes[this.animation.keyframes.length-1].value:this.target.style[this.animationAttribute]=this.animation.keyframes[this.animation.keyframes.length-1].staticValue:"value"==this.animationValueType?this.target.style[this.animationAttribute]=this.animation.keyframes[0].value:this.target.style[this.animationAttribute]=this.animation.keyframes[0].staticValue;this.animationStatus=e};var titleContainer,titleCanvas,titleCtx,titleParticleCount=150,titleParticles=Array(),Particle=function(t,i,e,a,n){this.size=t,this.velocityX=i,this.velocityY=e,this.positionX=a,this.positionY=n};Particle.prototype.render=function(t){this.positionX+=this.velocityX,(this.positionX>t.canvas.width+10||this.positionX<-10)&&(this.velocityX*=-1),this.positionY+=this.velocityY,(this.positionY>t.canvas.height+10||this.positionY<-10)&&(this.velocityY*=-1),t.fillStyle="rgba(0,0,0,1)",t.beginPath(),t.arc(this.positionX,this.positionY,this.size,0,2*Math.PI,!1),t.fill()},Particle.prototype.connect=function(t,i){var e=(this.positionX-t.positionX)*(this.positionX-t.positionX)+(this.positionY-t.positionY)*(this.positionY-t.positionY),a=8e4;if(a>e){var n=.3*(1-e/a);i.beginPath(),i.moveTo(this.positionX,this.positionY),i.lineTo(t.positionX,t.positionY),i.lineWidth=1,i.strokeStyle="rgba(0,0,0,"+n+")",i.stroke()}},window.requestAnimationFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)}}(),Element.prototype.hasClass=function(t){return-1!==this.className.indexOf(t)},function(){function t(){initAnimations(),initScrollSnap(),requestAnimationFrame(i)}function i(){updateAnimations(),updateScrollSnap();var t=1e3/((n=new Date)-s);n!=s&&(o+=(t-o)/50,s=n),requestAnimationFrame(i)}function e(){resizeAnimations(),resizeScrollSnap()}function a(){scrollScrollSnap()}window.addEventListener("load",t,!1);var n,o=0,s=1*new Date;window.addEventListener("resize",e,!1),window.addEventListener("scroll",a,!1)}();var snapPoints=new Array,target=null,targetDist,animationProgress=0,animationState=1,disableWidth=400,disabled=!1,lDate,deltaTime,scrolling=!1,scrollTimer,SnapPoint=function(t){this.el=t,this.snapMargin=parseFloat(this.el.dataset.snapMargin);var i=this.el.getBoundingClientRect();switch(this.el.dataset.snapTarget){case"top":this.snapTarget=window.pageYOffset+i.top;break;case"middle":this.snapTarget=window.pageYOffset+i.top+.5*window.innerHeight;break;case"bottom":this.snapTarget=window.pageYOffset+i.top+window.innerHeight}};